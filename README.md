# 데이터베이스 설계의 핵심 원칙

## 1. `중복 없애기`의 원칙 ※※가장 중요함※※

- 작성자 컬럼에 `홍길동` 데이터가 중복이 되어있다면 ?
- 만약, 작성자 컬럼에 `홍길동`을 모두 `고길동` 으로 수정해야 한다면 ?
- 실수에 의해서 누락되어 수정이 안된 데이터가 남을 수 있다 (모순된 데이터 발생)
- 공식 명칭으로 `이상 현상 (Anomaly)` 중에 `갱신 이상(Update Anomaly)` 라고 함
- Anomaly 를 개선하고 방지하기 위해 DB 설계법을 `정규화(Normalization)`라고 함

## 2. 정규화 (Normalization)

- `데이터 중복이 안되도록 하는 과정`을 정규화 라고 함
- 제1정규형, 제2정규형, 제3정규형 등이 제시됨
- `데이터가 중복 안되도록 설계를 해야 함`
- 가장 간단하게는 중복되는 데이터가 있다면, 테이블을 별도로 생성해서 분리해야함. (표 만들기)

# DB 설계 전체 과정 진행 순서

## 1. 저장 및 관리하고자 하는 데이터를 파악하여야 함

- 적극적으로 UI 를 보고 진행하기를 권장함
- 피그마를 보고 충분히 고민하여서 저장 컬럼들을 정리함
- 만약, UI 가 나오지 않았다면 ? `요구사항명세서`를 작성 후 저장 컬럼들 정리

## 2. grouping (그룹핑) 해서 분류를 진행함

- 각 컬럼명을 지정 후 `상위 개념` 을 찾아서 상위 개념에 각 각의 컬럼들을 이동해줌
- 상위 개념을 `Entity` 라고 함

```text
아이디, 비밀번호, 이름, 이메일, 영화이름, 영화출연배우, 영화상영시간,
게시글, 게시글제목, 게시글내용, 게시글 생성 시간
```

- 위의 컬럼 내용을 상위 개념(`Entity`)으로 묶어봄

```text
아이디, 비밀번호, 이름, 이메일 ====> 사용자들
영화이름, 영화출연배우, 영화상영시간 ====> 영화들
게시글, 게시글제목, 게시글내용, 게시글 생성 시간 ====> 게시글들
```

## 3. 실제로 고민해서 `Entity` 지정해보기

### 3.1 요구사항 명세서로 진행

- PRD는 제품 요구사항 정의서 (Product Requirements Document) 와는 다른 개념임.

- 요구사항
  - 회원 가입 기능
    - 회원 가입을 할 때는 이메일, 비밀번호, 이름의 정보를 받는다.
  - 로그인 기능
    - 로그인 할 때는 이메일, 비밀번호를 활용해서 로그인 한다.
  - 게시글 작성 기능
    - 로그인한 사용자만 게시글을 작성 할 수 있다.
    - 게시글에는 제목과 내용을 작성 할 수 있다. (`문서 버전 업데이트`)
  - 게시글 조회 기능
    - 작성자, 게시글 제목, 게시글 내용, 게시글 작성 시간을 조회 할 수 있다.

## 3.2 요구사항 명세서를 기반으로 데이터 분석해보기

- 어떤 데이터를 저장해야 하는지 파악함
- 어떤 방식으로 데이터를 분류해야 할 지를 파악함

- 회원 가입 기능
  - 회원 가입을 할 때는 `이메일`, `비밀번호`, `이름`의 정보를 받는다.

- 로그인 기능
  - 로그인 할 때는 `이메일`, `비밀번호`를 활용해서 로그인 한다.
- 게시글 작성 기능

  - 로그인한 사용자만 게시글을 작성 할 수 있다.
  - 게시글에는 `제목`과 `내용`을 작성 할 수 있다. (`문서 버전 업데이트`)

- 게시글 조회 기능
  - `작성자`, `게시글 제목`, `게시글 내용`, `게시글 작성 시간`을 조회 할 수 있다.

### 3.3 그룹핑을 진행한다

- 저장해야 하는 데이터들을 분류해서 묶어준다
- 하나의 그룹이 생성되고 이를 분류한 이름이 `Entity` 라고 한다
- `Entity` 는 `테이블` 이면서 `테이블 이름` 이다
- 실습 ) `https://docs.google.com/spreadsheets/d/1PjX6Sepcg3nVyHcGmYTeMgkz_9uw-6aZZbLbqfhALtU/edit?gid=0#gid=0`